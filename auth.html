<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOLT999 - Authentication</title>
    <meta name="theme-color" content="#111827">
    <meta name="description" content="Beast Earn - Play Color Prediction and Mine games to win real money!">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="logo.avif">
    <link rel="icon" href="logo.avif" type="image/avif">

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="firebase-config.js"></script>

    <style>
        body {
            font-family: sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #000000;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Logo Component
        const Logo = ({ onClick }) => (
            <div 
                className="w-16 h-16 rounded-full overflow-hidden border-4 border-yellow-400 shadow-lg cursor-pointer hover:scale-105 transition-transform"
                onClick={onClick}
            >
                <img src="logo.avif" alt="Beast Earn Logo" className="w-full h-full object-cover" />
            </div>
        );

        // Auth Component
        const Auth = () => {
            const [isLoading, setIsLoading] = React.useState(false);
            const [error, setError] = React.useState('');
            const [phoneNumber, setPhoneNumber] = React.useState('');
            const [verificationCode, setVerificationCode] = React.useState('');
            const [verificationId, setVerificationId] = React.useState('');
            const [showVerification, setShowVerification] = React.useState(false);

            const handleSendCode = async (e) => {
                e.preventDefault();
                setIsLoading(true);
                setError('');

                try {
                    const appVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');
                    const confirmationResult = await firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier);
                    setVerificationId(confirmationResult.verificationId);
                    setShowVerification(true);
                } catch (err) {
                    setError(err.message);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleVerifyCode = async (e) => {
                e.preventDefault();
                setIsLoading(true);
                setError('');

                try {
                    const credential = firebase.auth.PhoneAuthProvider.credential(verificationId, verificationCode);
                    await firebase.auth().signInWithCredential(credential);
                    window.location.href = 'index.html';
                } catch (err) {
                    setError(err.message);
                } finally {
                    setIsLoading(false);
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center bg-gray-900 p-4">
                    <div className="max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-xl shadow-2xl">
                        <div className="flex flex-col items-center">
                            <Logo />
                            <h2 className="mt-6 text-3xl font-bold text-yellow-400">Welcome to BOLT999</h2>
                            <p className="mt-2 text-gray-400">Sign in to start playing</p>
                        </div>

                        {!showVerification ? (
                            <form onSubmit={handleSendCode} className="mt-8 space-y-6">
                                <div>
                                    <label htmlFor="phone" className="text-gray-300">Phone Number</label>
                                    <input
                                        id="phone"
                                        type="tel"
                                        required
                                        className="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400"
                                        placeholder="+1234567890"
                                        value={phoneNumber}
                                        onChange={(e) => setPhoneNumber(e.target.value)}
                                    />
                                </div>

                                <div id="recaptcha-container"></div>

                                {error && (
                                    <div className="text-red-500 text-sm">{error}</div>
                                )}

                                <button
                                    type="submit"
                                    disabled={isLoading}
                                    className="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-black bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 disabled:opacity-50"
                                >
                                    {isLoading ? 'Sending...' : 'Send Code'}
                                </button>
                            </form>
                        ) : (
                            <form onSubmit={handleVerifyCode} className="mt-8 space-y-6">
                                <div>
                                    <label htmlFor="code" className="text-gray-300">Verification Code</label>
                                    <input
                                        id="code"
                                        type="text"
                                        required
                                        className="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400"
                                        placeholder="Enter 6-digit code"
                                        value={verificationCode}
                                        onChange={(e) => setVerificationCode(e.target.value)}
                                    />
                                </div>

                                {error && (
                                    <div className="text-red-500 text-sm">{error}</div>
                                )}

                                <button
                                    type="submit"
                                    disabled={isLoading}
                                    className="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-black bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 disabled:opacity-50"
                                >
                                    {isLoading ? 'Verifying...' : 'Verify Code'}
                                </button>
                            </form>
                        )}
                    </div>
                </div>
            );
        };

        // Render the Auth component
        ReactDOM.render(<Auth />, document.getElementById('root'));
    </script>
</body>
</html> 